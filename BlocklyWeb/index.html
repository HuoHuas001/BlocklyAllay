<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BlocklyAllay - 可视化脚本编辑器</title>
    <link rel="stylesheet" href="css/style.css">
    <!-- Blockly -->
    <script src="https://unpkg.com/blockly/blockly_compressed.js"></script>
    <script src="https://unpkg.com/blockly/blocks_compressed.js"></script>
    <script src="https://unpkg.com/blockly/javascript_compressed.js"></script>
    <script src="https://unpkg.com/blockly/msg/zh-hans.js"></script>
</head>
<body>
    <div id="app">
        <header id="header">
            <div class="logo">
                <span class="logo-icon">🧱</span>
                <span class="logo-text">BlocklyAllay</span>
            </div>
            <nav class="nav-buttons">
                <button id="btn-new" class="btn" title="新建">
                    <span>📄</span> 新建
                </button>
                <button id="btn-save" class="btn" title="保存">
                    <span>💾</span> 保存
                </button>
                <button id="btn-load" class="btn" title="加载">
                    <span>📂</span> 加载
                </button>
                <button id="btn-export" class="btn btn-primary" title="导出脚本">
                    <span>📤</span> 导出JS
                </button>
                <a href="https://badoc.txssb.cn" target="_blank" class="btn btn-docs" title="查看文档">
                    <span>📚</span> 文档
                </a>
            </nav>
        </header>

        <main id="main">
            <div id="blockly-area">
                <div id="blockly-div"></div>
            </div>
            <div id="code-panel" class="collapsed">
                <div class="panel-header">
                    <span>生成的代码</span>
                    <button id="btn-toggle-code" class="btn-small">◀</button>
                </div>
                <div class="panel-content">
                    <pre id="code-output"><code></code></pre>
                    <button id="btn-copy-code" class="btn">📋 复制代码</button>
                </div>
            </div>
        </main>

        <footer id="footer">
            <span id="status">就绪</span>
            <span id="block-count">方块: 0</span>
        </footer>
    </div>

    <input type="file" id="file-input" accept=".xml,.blockly" style="display:none">

    <!-- Custom Blocks -->
    <script src="js/blocks/events.js"></script>
    <script src="js/blocks/players.js"></script>
    <script src="js/blocks/world.js"></script>
    <script src="js/blocks/entities.js"></script>
    <script src="js/blocks/items.js"></script>
    <script src="js/blocks/forms.js"></script>
    <script src="js/blocks/bossbar.js"></script>
    <script src="js/blocks/scheduler.js"></script>
    <script src="js/blocks/utils.js"></script>
    <script src="js/blocks/commands.js"></script>

    <!-- Code Generators -->
    <script src="js/generators/events.js"></script>
    <script src="js/generators/players.js"></script>
    <script src="js/generators/world.js"></script>
    <script src="js/generators/entities.js"></script>
    <script src="js/generators/items.js"></script>
    <script src="js/generators/forms.js"></script>
    <script src="js/generators/bossbar.js"></script>
    <script src="js/generators/scheduler.js"></script>
    <script src="js/generators/utils.js"></script>
    <script src="js/generators/commands.js"></script>

    <!-- Toolbox & Main -->
    <script src="js/toolbox.js"></script>
    <script src="js/main.js"></script>
</body>
</html>
